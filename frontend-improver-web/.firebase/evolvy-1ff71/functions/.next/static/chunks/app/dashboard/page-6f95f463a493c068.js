(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{48817:function(e,a,t){Promise.resolve().then(t.bind(t,60632))},60632:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return i}});var s=t(3827),d=t(64090),l=t(71126),r=t(46136),n=t(41196);function i(){var e;let{data:a}=(0,l.useSession)(),[t,r]=(0,d.useState)([]),[i,c]=(0,d.useState)(!0),[o,h]=(0,d.useState)("7d");(0,d.useEffect)(()=>{m()},[o]);let m=async()=>{try{let e=await fetch("/api/analytics?range=".concat(o));if(!e.ok)throw Error("Failed to fetch analytics");let a=await e.json();r(Array.isArray(a)?a:[])}catch(e){console.error("Error fetching analytics:",e),r([])}finally{c(!1)}};return a?i?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Engagement Analytics Dashboard"}),(0,s.jsxs)("select",{value:o,onChange:e=>h(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,s.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,s.jsx)("option",{value:"all",children:"All time"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Scroll Depth Comparison"}),(0,s.jsx)(n.$Q,{data:(()=>{let e=t.filter(e=>"original"===e.variant&&"scroll"===e.type),a=t.filter(e=>"improved"===e.variant&&"scroll"===e.type);return{labels:["0-25%","25-50%","50-75%","75-100%"],datasets:[{label:"Original",data:[e.filter(e=>e.data.depth&&e.data.depth<=25).length,e.filter(e=>e.data.depth&&e.data.depth>25&&e.data.depth<=50).length,e.filter(e=>e.data.depth&&e.data.depth>50&&e.data.depth<=75).length,e.filter(e=>e.data.depth&&e.data.depth>75).length],backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Improved",data:[a.filter(e=>e.data.depth&&e.data.depth<=25).length,a.filter(e=>e.data.depth&&e.data.depth>25&&e.data.depth<=50).length,a.filter(e=>e.data.depth&&e.data.depth>50&&e.data.depth<=75).length,a.filter(e=>e.data.depth&&e.data.depth>75).length],backgroundColor:"rgba(54, 162, 235, 0.5)"}]}})()})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Time Spent Comparison"}),(0,s.jsx)(n.x1,{data:(()=>{let e=t.filter(e=>"original"===e.variant&&"time_spent"===e.type),a=t.filter(e=>"improved"===e.variant&&"time_spent"===e.type);return{labels:["0-30s","30-60s","1-2m","2-5m","5m+"],datasets:[{label:"Original",data:[e.filter(e=>e.data.seconds&&e.data.seconds<=30).length,e.filter(e=>e.data.seconds&&e.data.seconds>30&&e.data.seconds<=60).length,e.filter(e=>e.data.seconds&&e.data.seconds>60&&e.data.seconds<=120).length,e.filter(e=>e.data.seconds&&e.data.seconds>120&&e.data.seconds<=300).length,e.filter(e=>e.data.seconds&&e.data.seconds>300).length],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Improved",data:[a.filter(e=>e.data.seconds&&e.data.seconds<=30).length,a.filter(e=>e.data.seconds&&e.data.seconds>30&&e.data.seconds<=60).length,a.filter(e=>e.data.seconds&&e.data.seconds>60&&e.data.seconds<=120).length,a.filter(e=>e.data.seconds&&e.data.seconds>120&&e.data.seconds<=300).length,a.filter(e=>e.data.seconds&&e.data.seconds>300).length],borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)"}]}})()})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Interaction Types"}),(0,s.jsx)(n.$I,{data:(()=>{let e=t.filter(e=>"original"===e.variant),a=t.filter(e=>"improved"===e.variant),s=["click","scroll","form_submit","media_play"];return{labels:s,datasets:[{label:"Original",data:s.map(a=>e.filter(e=>e.type===a).length),backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Improved",data:s.map(e=>a.filter(a=>a.type===e).length),backgroundColor:"rgba(54, 162, 235, 0.5)"}]}})()})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Total Visitors"}),(0,s.jsx)("span",{className:"font-medium",children:t.length})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Average Time Spent"}),(0,s.jsxs)("span",{className:"font-medium",children:[Math.round(t.filter(e=>"time_spent"===e.type&&e.data.seconds).reduce((e,a)=>e+(a.data.seconds||0),0)/t.filter(e=>"time_spent"===e.type).length||0),"s"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Most Common Interaction"}),(0,s.jsx)("span",{className:"font-medium",children:(null===(e=Object.entries(t.reduce((e,a)=>(e[a.type]=(e[a.type]||0)+1,e),{})).sort((e,a)=>a[1]-e[1])[0])||void 0===e?void 0:e[0])||"N/A"})]})]})]})]})]})})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Please sign in to view the dashboard"})})})}r.kL.register(r.uw,r.f$,r.od,r.jn,r.ZL,r.Dx,r.u,r.De,r.qi)}},function(e){e.O(0,[674,126,707,971,69,744],function(){return e(e.s=48817)}),_N_E=e.O()}]);