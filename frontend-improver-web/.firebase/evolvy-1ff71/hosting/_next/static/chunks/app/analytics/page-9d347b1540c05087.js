(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{16115:function(e,t,s){Promise.resolve().then(s.bind(s,13184))},13184:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(3827),r=s(64090),n=s(71126),i=s(85754),c=s(26587),l=s(71362),d=s(38333),o=s(23356),x=s(22983),m=s(10166),u=s(94866),h=s(98061);function f(){let{data:e}=(0,n.useSession)(),[t,s]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[g,y]=(0,r.useState)(!0),[j,b]=(0,r.useState)(""),[v,w]=(0,r.useState)("7d");return((0,r.useEffect)(()=>{(async()=>{try{let e=new Date;"30d"===v?e.setDate(e.getDate()-30):e.setDate(e.getDate()-7);let t=await fetch("/api/analytics?startDate=".concat(e.toISOString())),a=await t.json();s(a.events),p(a.stats)}catch(e){b("Failed to fetch analytics data"),console.error(e)}finally{y(!1)}})()},[v]),e)?g?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):j?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-red-500",children:j})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Analytics Dashboard"}),(0,a.jsxs)("div",{className:"mb-8 flex gap-4",children:[(0,a.jsx)(i.z,{variant:"7d"===v?"default":"outline",onClick:()=>w("7d"),children:"Last 7 Days"}),(0,a.jsx)(i.z,{variant:"30d"===v?"default":"outline",onClick:()=>w("30d"),children:"Last 30 Days"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:f.map(e=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:e._count})]},e.type))}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"User Interactions Over Time"}),(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(c.h,{width:"100%",height:"100%",children:(0,a.jsxs)(l.w,{data:(()=>{let e={};return t.forEach(t=>{let s=new Date(t.timestamp).toLocaleDateString();switch(e[s]||(e[s]={date:s,clicks:0,scrolls:0,forms:0}),t.type){case"click":e[s].clicks++;break;case"scroll":e[s].scrolls++;break;case"form_submit":e[s].forms++}}),Object.values(e)})(),children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3"}),(0,a.jsx)(o.K,{dataKey:"date"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(m.u,{}),(0,a.jsx)(u.D,{}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"clicks",stroke:"#8884d8",name:"Clicks"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"scrolls",stroke:"#82ca9d",name:"Scrolls"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"forms",stroke:"#ffc658",name:"Form Submissions"})]})})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Events"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Page"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.slice(0,10).map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.type}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.page}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(e.data,null,2)})})]},e.id))})]})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("p",{children:"Please sign in to view analytics"})})}},85754:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(3827),r=s(64090),n=s(59143),i=s(49769),c=s(1657);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:d=!1,...o}=e,x=d?n.g7:"button";return(0,a.jsx)(x,{className:(0,c.cn)(l({variant:r,size:i,className:s})),ref:t,...o})});d.displayName="Button"},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(75504),r=s(51367);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[233,126,149,971,69,744],function(){return e(e.s=16115)}),_N_E=e.O()}]);