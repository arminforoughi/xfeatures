(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{67424:function(e,t,n){Promise.resolve().then(n.bind(n,1070))},1070:function(e,t,n){"use strict";n.r(t);var s=n(3827),r=n(64090),a=n(71126),i=n(47907),c=n(85754),o=n(9723),l=n(95601),d=n.n(l);let u=(0,r.memo)(e=>{let{branch:t,onSelect:n}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 flex items-center justify-between hover:shadow-md transition-shadow",onClick:()=>n(t.name),role:"button",tabIndex:0,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Commit: ",t.commit.sha.substring(0,7)]})]})},t.name)});u.displayName="BranchItem";let m=()=>((0,r.useEffect)(()=>({startTime:Date.now(),scrollDepth:0,interactions:[],init(){let e=()=>{let e=(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100;e>this.scrollDepth&&(this.scrollDepth=e,this.logInteraction("scroll",{depth:e}))},t=e=>{let t=e.target;if(t.matches('button, a, [role="button"]')){var n;this.logInteraction("click",{element:t.tagName,text:null===(n=t.textContent)||void 0===n?void 0:n.trim(),id:t.id,class:t.className})}},n=e=>{let t=e.target;"FORM"===t.tagName&&this.logInteraction("form_submit",{formId:t.id,formAction:t.action})},s=e=>{let t=e.target;t.matches("video, audio")&&this.logInteraction("media_play",{type:t.tagName,id:t.id})};window.addEventListener("scroll",e),document.addEventListener("click",t),document.addEventListener("submit",n),document.addEventListener("play",s,!0);let r=setInterval(()=>{let e=(Date.now()-this.startTime)/1e3;this.logInteraction("time_spent",{seconds:e})},3e4);return()=>{window.removeEventListener("scroll",e),document.removeEventListener("click",t),document.removeEventListener("submit",n),document.removeEventListener("play",s,!0),clearInterval(r)}},logInteraction(e,t){this.interactions.push({type:e,data:t,timestamp:new Date().toISOString()}),fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,data:t,timestamp:new Date().toISOString()})}).catch(console.error)}}).init(),[]),null),h=()=>{let{data:e}=(0,a.useSession)(),t=(0,i.useRouter)(),[n,l]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[f,x]=(0,r.useState)(""),g=new URLSearchParams(window.location.search).get("repo"),b=(0,r.useCallback)(async()=>{if((null==e?void 0:e.accessToken)&&g)try{let t="branches-".concat(g),n=sessionStorage.getItem(t);if(n){l(JSON.parse(n)),h(!1);return}let s=await fetch("https://api.github.com/repos/".concat(g,"/branches"),{headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!s.ok)throw Error("Failed to fetch branches");let r=await s.json();l(r),sessionStorage.setItem(t,JSON.stringify(r))}catch(e){x(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},[null==e?void 0:e.accessToken,g]);(0,r.useEffect)(()=>{(null==e?void 0:e.accessToken)&&g&&b()},[e,g,b]);let v=n=>{t.push("/improve?repo=".concat(g,"&branch=").concat(n,"&token=").concat(null==e?void 0:e.accessToken))};return e?m?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500",role:"status",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}):f?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,s.jsx)("p",{className:"text-red-500 mb-4",children:f}),(0,s.jsx)(c.z,{onClick:()=>t.push("/"),children:"Return Home"})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)(d(),{children:[(0,s.jsx)("title",{children:"Branches Page"}),(0,s.jsx)("meta",{name:"description",content:"Select a branch for A/B testing on the Branches Page."}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)("header",{className:"w-full border-b bg-background",children:(0,s.jsxs)("div",{className:"container mx-auto flex h-28 items-center justify-between px-4",children:[(0,s.jsx)(o.Z,{src:"/Adobe Express - file.png",alt:"Logo",width:96,height:96,className:"",priority:!0}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-3xl font-bold tracking-tight text-primary",children:"Branch Management"}),(0,s.jsx)("span",{className:"text-base text-muted-foreground mt-1",children:"Select a branch for A/B testing"})]})]})}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Select a Branch"}),(0,s.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,s.jsx)(u,{branch:e,onSelect:v},e.name))})]}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsx)(c.z,{variant:"outline",onClick:()=>t.push("/"),className:"text-gray-600",children:"Back to Home"})})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Please sign in to view branches"})})})};t.default=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500",role:"status",children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}),children:(0,s.jsx)(h,{})})]})},9723:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(3827),r=n(64090);function a(e){let{src:t,alt:n,width:a,height:i,className:c="",priority:o=!1}=e,[l,d]=(0,r.useState)(!1);return l?(0,s.jsx)("div",{className:"bg-gray-100 rounded-lg flex items-center justify-center ".concat(c),style:{width:a,height:i},children:(0,s.jsx)("div",{className:"text-gray-500 text-sm",children:"Image unavailable"})}):(0,s.jsx)("img",{src:t,alt:n,width:a,height:i,loading:o?"eager":"lazy",className:c,onError:()=>d(!0),style:{maxWidth:"100%",height:"auto"}})}},85754:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var s=n(3827),r=n(64090),a=n(59143),i=n(49769),c=n(1657);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:l=!1,...d}=e,u=l?a.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(o({variant:r,size:i,className:n})),ref:t,...d})});l.displayName="Button"},1657:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var s=n(75504),r=n(51367);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}},47907:function(e,t,n){"use strict";var s=n(15313);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},95601:function(e,t){"use strict";function n(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},function(e){e.O(0,[233,126,971,69,744],function(){return e(e.s=67424)}),_N_E=e.O()}]);